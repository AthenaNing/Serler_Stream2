<p id="notice"><%= notice %></p>

<h1>Listing Search Queries</h1>

<div class="row">
  <div class="col-lg-12">
    <div class="ibox float-e-margins">
      <div class="ibox-content">
        <div class="row table_box">
          <div class="col-md-6">
            <form action="/search_queries" class="search-form" method="get">
              <div class="input-group">
                <input id="quick_search" type="text" placeholder="Search" name="search" class="input-sm form-control"> <span class="input-group-btn">
                  <button id="quick_go" type="submit" class="btn btn-sm btn-primary"> Go!</button> </span>
              </div>
              <p class="mandatory">This field is required</p>
              <%= link_to 'Advance Search query', new_search_query_path, { class: 'btn btn-success' } %>
            </form>
          </div>
          <div class="col-md-6">
            <div class="column-view">
              <label style="font-weight:bold;">Filter: </label>
              <label><input type="checkbox" class="check-head" value="1" name="author" checked="checked"><span>Author</span></label>
              <label><input type="checkbox" class="check-head" value="1" name="year" checked="checked"><span>Year</span></label>
              <label><input type="checkbox" class="check-head" value="1" name="journal"><span>Journal</span></label>
              <label><input type="checkbox" class="check-head" value="1" name="volume"><span>Volume</span></label>
              <label><input type="checkbox" class="check-head" value="1" name="issues"><span>Issues</span></label>
              <label><input type="checkbox" class="check-head" value="1" name="pages"><span>Pages</span></label>
              <label><input type="checkbox" class="check-head" value="1" name="doi"><span>DOI</span></label>
              <label><input type="checkbox" class="check-head" value="1" name="url"><span>URL</span></label>
              <label><input type="checkbox" class="check-head" value="1" name="keywords"><span>Keywords</span></label>
            </div>
          </div>
        </div>
        <div class="table-responsive">

          <table class="table table-striped">
            <thead>
            <tr>
              <th class="title">Title </th>
              <th class="author">Author</th>
              <th class="year">Year</th>
              <th class="journal">Journal </th>
              <th class="volume">Volume</th>
              <th class="issues">Issues</th>
              <th class="pages">Pages</th>
              <th class="doi">DOI</th>
              <th class="url">URL</th>
              <th class="keywords">Keywords</th>
            </tr>
            </thead>
            <tbody>
            <% @articles.each do |article| %>
                <tr>
                  <td class="title"><b><%= link_to article.title, article %></b></td>
                  <td class="author">Authors</td>
                  <td class="year"><%= article.year %></td>
                  <td class="journal"><%= article.journal %></td>
                  <td class="volume">2</td>
                  <td class="issues"></td>
                  <td class="pages"><%= article.pages %></td>
                  <td class="doi"></td>
                  <td class="url"></td>
                  <td class="keywords"></td>
                </tr>
            <% end %>
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>

</div>

<script type="text/javascript">
  $(document).ready(function(){

    $(".check-head:checkbox:not(:checked)").each(function(){
      var col = "table ." + $(this).attr("name");
      $(col).hide();
    });

    $(".check-head:checkbox").click(function(){
      var col = "table ." + $(this).attr("name");
      $(col).toggle();
    });

    $(".search-form").submit(function(e) {
      if($.trim($('#quick_search').val()) == ''){
        $("#quick_search").css("border", "2px solid red");
        $(".mandatory").css("display", "block");
        e.preventDefault();
        return false;
      }
    });

  });

</script>
